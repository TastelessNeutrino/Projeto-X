<html> <!-- início do html -->

    <meta charset="UTF-8"> <!-- este comando serve para que os caracteres especiais apareçam em dispositivos diferentes, sem ele, por exemlpo, os textos ficavam estranhos no celular -->
<title>projectX</title>

<head> <!-- esta é a "cabeça" do html-->

<style>
    
    #opcoes {
    text-align: center; /* Centraliza os botões horizontalmente */
    margin-top: 45px; /* adiciona espaço na parte superior do contêiner */
}
        button { /* define a cor dos quadradinhos dos botões */

            background-color: #500000;
            color: rgb(255, 255, 255);
            padding: 10px 20px;
            border: none; 
            cursor: pointer; /* o comando define o cursor como uma mãozinha quando o mouse está sobre o botão clicavel */
            display: block; /* este serve para exibe os botões em uma nova linha, ao invés de ser um ao lado do outro */
            margin: 0 auto; /* centraliza horizontalmente dentro do seu contêiner */
            margin-bottom: 10px; /* adiciona espaço entre os botões */

}

        button:hover {
            background-color: #000000; /* define a cor do quadradinho quando o mouse está sobre o botão */
        }
            
        /* comando para centralizar o texto da narrativa */
        #narrativa {
            text-align: center;
            margin-bottom: 20px; /* adiciona um espaço entre o texto e os botões */
            margin-top: 200px; /* adiciona espaço na parte superior do contêiner */
            margin-left: 250px; /* adiciona espaço na parte superior do contêiner */
            margin-right: 250px; /* adiciona espaço na parte superior do contêiner */
            font-size: 20px; /* tamanho da fonte do texto da historia */

        }
        
       /* Estilos específicos para a página 0_0 */
       .pagina0_0 {
        margin-top: 10px;
        background-image: url('detective.jpg');
        background-size: cover; /* para ajustar a imagem ao tamanho da tela */
        background-repeat: no-repeat; /* para evitar a repetição da imagem */
        height: 100vh; /* para ocupar a altura total da tela */
    }
     /* falta terminar a implementação dessas imagens de fundo! */
     
    </style>

</head>
<body> <!-- não ironicamente, aqui temos um "corpo" html, separado da cabeça... ele ficará com a "pança" do site, imagine que é a parte maior, como em um corpo mesmo-->
    
    <audio id="efeitoSonoro">
        <source src="efeitosonoro.mp3" type="audio/mpeg">
    </audio>
    
    <div> <!-- aqui nada mais que uma divisão para definir elementos do jogo que serão utilizados mais à frente -->       
        <div id="game-container"> <!-- ou seja, uma identidade unica "id" para cada elemento no conteúdo do jogo -->
            <p id="narrativa"> <!-- no caso, serão os textos da narrativa -->
            <div id="opcoes"> <!-- e aqui, para as opções que aparecerão nos quadradinhos dos botões clicáveis -->
        </div> 
    </div>  <!-- aqui outra divisão para marcar o final da seção -->
    
    </div>

    <div class="pagina0_0"></div>
    <div class="pagina1_0"></div>
    <!-- falta terminar a implementação dessas imagens de fundo! -->



</html> <!-- até aqui, em html -->

<script> // esta é a parte funcional, ou seja, o "script" em JavaScript, engraçado que até o coisinha de comentar já muda de "<-- -->" para "//"

const historia = { // criando uma constante, chamada história para armazenar o conteúdo de cada "página" do GameBook
    pagina0_0: // esta parte definirá o conteúdo presente em cada etapa "página" do jogo, no caso, "página 0_0" será a interface inicial.
    {          // note que "pagina 0_0" foi nomeada com _ poara não atrapalhar o reconhecimento pelo browser
        texto: '"Achamos que somos livres mas não somos, seguimos sempre o mesmo caminho."',
        opcoes: [ // lembra que "opcoes" já foi visto anteriormente no html? posteriormente veremos também a sua definição em JS
            {     // aqui, dentro das chaves, cada opção terá um texto, visível no quadradinho, e "página" referenete a ele
                texto: "INICIAR JORNADA",    // eis aqui o texto do enunciado, que no caso, é a opção que será utilizada para iniciar a jogada, ou seja, levar para a interface
                proximaPagina: "pagina1_0"   // e aqui, a página que ele buscará
            }
        ]
    },
    pagina1_0: { // nessa página, 1_0, já haverá mais de uma opção
        texto: "Em derradeiro de setembro de 1923, na manhã daquele domingo nublado, depois de tomar um café na padaria da esquina e ler o seu jornal matinal, Adam estava caminhando para casa intrigado com a notícia dos arrombamentos recentes.",
        opcoes: [
            {
                texto: "PROSSEGUIR",
                proximaPagina: "pagina2_0"
            }, // naturalmente as opções são separadas aqui com o uso de vírgulas ","
            {
                texto: "VOLTAR PARA A PADARIA",
                proximaPagina: "pagina2_1"
            },
            {
                texto: "JÁ ME ENCHEU O SACO", // nessa opção, o texto traz uma possibilidade de enredo imprevisível, para surpreender o jogador
                proximaPagina: "pagina2_2"
            }
        ]
    },
    pagina2_0: {
        texto: "A movimentada cidade em que residia, onde normalmente ninguém se importaria com as singularidades de transeuntes aleatórios, era o cenário perfeito para quem deseja passar despercebido.",
        opcoes: [
            {
                texto: "PROSSEGUIR",
                proximaPagina: "pagina3_0"
            },
        ]
    },
    pagina2_1: {
        texto: "Você já tomou café! Não há mais nada interessante a se fazer por aqui!",
        opcoes: [
            {
                texto: "SAIR DA PADARIA",
                proximaPagina: "pagina1_0"
            },
            {
                texto: "TOMAR OUTRO CAFÉ",
                proximaPagina: "pagina2_2cafe"
            },
            {
                texto: "JOGO ENFADONHO",
                proximaPagina: "pagina2_8"
            }
        ]
    },
    pagina2_2: {
        texto: "Lamentamos o infortúnio! Vá descansar!",
        opcoes: [
            {
                texto: "REINICIAR JORNADA",
                proximaPagina: "pagina0_0"
            },
            {
                texto: "VOLTAR PARA O JOGO",
                proximaPagina: "pagina2_1"
            }
        ]
    },
    pagina3_0: {
        texto: "Adam Lawrence, costumava se fechar completamente para as possibilidades do mundo alheias à sua rotina, entretanto, era domingo, e ele percebeu um rapaz saindo pela janela do apartamento de sua vizinha, Elena.",
        opcoes: [
            {
                texto: "SEGUIR SUSPEITO",
                proximaPagina: "pagina4_2"
            },
            {
                texto: "ARREMESSAR UMA PEDRA",
                proximaPagina: "pagina4_0"
            },
            {
                texto: "IGNORAR O SUSPEITO E VOLTAR PARA CASA",
                proximaPagina: "pagina4_1"
            },
            {
                texto: "SEGUIR SUSPEITO",
                proximaPagina: "pagina4_2"
            }]
    },
    pagina2_2cafe: {
        texto: "Testemunhas relataram às autoridades, o comportamento frenético e alucinado de Adam que enfartou ao ingerir quantidades inacreditáveis do líquido. R.I.P.",
        opcoes: [{
                texto: "REINICIAR JORNADA",
                proximaPagina: "pagina0_0"
            },
            {
                texto: "Sair do jogo",
                proximaPagina: "pagina ?"
            }]
    },
     pagina4_2: {
        texto: "Despretensiosamente, ele resolve seguir o sujeito até um pub. Chegando lá ele se depara com Michelle, sua colega do escritório.",
        opcoes: [{
                texto: "Falar com Michelle",
                proximaPagina: "pagina7_0"
            },
            {
                texto: "Ignorar Michelle e beberricar um pouco",
                proximaPagina: "pagina7_1"
            },
            {
                texto: "Continuar seguindo o suspeito",
                proximaPagina: "pagina7_2"
            }
           ]
    },
     pagina4_1: {
        texto: "Adam se apressou demais para seguir prosseguir o seu percuso e não percebeu quando um luxuoso Rolls-Royce Silver Ghost 1907 o acertou em cheio! R.I.P.",
        opcoes: [{
                texto: "SAIR DO JOGO",
                proximaPagina: "?"
            },
            {
                texto: "REINICIAR JORNADA",
                proximaPagina: "pagina0_0"
            }]
    },
    pagina5_0: {
        texto: "Adam tentou se desculpar, mas as desculpas não foram aceitas e as autoridades foram acionadas. Trágico fim! Adam foi institucionalizado.",
        opcoes: [
            {
                texto: "REINICIAR JORNADA",
                proximaPagina: "pagina0_0"
            },
            {
                texto: "SAIR DO JOGO",
                proximaPagina: "?"
            }]
    },
    pagina4_0: {
        texto: "Adam arremessou uma pedra na direção do suspeito, que se virou e o encarou com um olhar de desdém.",
        opcoes: [{
                texto: "SE DESCULPAR",
                proximaPagina: "pagina5_0"
            },
            {
                texto: "REINICIAR JORNADA",
                proximaPagina: "pagina0_0"
            },
            {
                texto: "EU DESISTO",
                proximaPagina: "?"
            }]
    },
    pagina7_0: {
        texto: "Conversando com Michelle, Adam percebe que ela está realmente interessada nos casos de invasões domiciliares. Ela relata o temor de que a cidade fique perigosa com a imigração. Adam comenta sobre o assunto e menciona o que acabou de ver na janela do apartamento de sua vizinha, Isabella. Michelle fica empolgada e sugere que eles explorem mais a situação, talvez conversando com Isabella ou investigando sua vizinhança para entender melhor os acontecimentos recentes.",
        opcoes: [{
                texto: "ACOMPANHAR MICHELLE",
                proximaPagina: "pagina8_0"
            },
            {
                texto: "SAIR DO PUB SOZINHO, SEM FALAR COM MICHELLE",
                proximaPagina: "?"
            }]
    },
    pagina7_2: {
        texto: "Adam escolhe se aproximar para obter mais informações e, em um momento inesperado, acaba se envolvendo em um confronto com o invasor. As coisas podem ficar perigosas, e Adam terá que tomar decisões rápidas para lidar com a situação.",
        opcoes: [{
                texto: "PRENDER O SUSPEITO",
                proximaPagina: "453544"
            },
            ,
        {
                texto: "FAZER ACORDO COM O SUSPEITO",
                proximaPagina: "pagina5544"
            },
        {
                texto: "DEIXAR ELE ESCAPAR",
                proximaPagina: "pagina555555"
            },
        {
                texto: "INTIMIDAR O SUSPEITO",
                proximaPagina: "pagina555"
            }]
    },

    pagina8_0: {
        texto: "A dupla de detetives amadores, Michelle e Adam, decidem iniciar suas investigações, mergulhando no mistério que envolve o suspeito e o que está acontecendo com Isabella. Eles suspeitam que há segredos ocultos a serem descobertos e estão determinados a descobrir a verdade, mesmo que isso os leve a lugares obscuros e perigosos na cidade.",
        opcoes: [{
                texto: "Hmm, interessante...",
                proximaPagina: "pagina8_1"
            },
            {
                texto: "Ok",
                proximaPagina: "pagina8_1"
            }]
    },
         pagina8_1: {
        texto: "Michelle e Adam decidem procurar Isabella para esclarecer a situação e obter mais informações. Ao se aproximarem dela com cautela, Isabella começa a revelar gradualmente os segredos que ela estava escondendo, levando-os a perceber que há um conflito oculto acontecendo nos bastidores, do qual ela é parte fundamental.",
        opcoes: [{
                texto: "",
                proximaPagina: ""
            },
            {
                texto: "",
                proximaPagina: "pagina"
            }]
    },



}


// a seguir, optei por não currificar as funções, para que estas fiquem bem descritivas "function"
// cada função, sujestivamente "function", implementará algum mecanismo no jogo
function mostrarPagina(pagina) {  // como diz o nome, esta função serve para  exibir a página, ou seja,  atualiza a interface do jogo e com o texto da página atual e cria botões para as opções disponíveis na página.
    const ElementoTextoHistoria = document.getElementById("narrativa")
    const ElementoOpcoes = document.getElementById("opcoes")

    const paginaAtualObj = historia[pagina]

    ElementoTextoHistoria.textContent = paginaAtualObj.texto
    
    // é necessário limpar as opções anteriores quando se escolhe a próxima
    ElementoOpcoes.innerHTML = ""; // a princípio, tentei implementar o código sem esta função, mas, na interface acontecia algo inesperado com os botões - ficavam se acumulano
    
    // adiciona as novas opções usando recursão
    // função recursiva para criar botões para todas as opções
function criarOpcoes(opcoes) {
        if (opcoes.length === 0) {
            return;
        }

        const opcaoAtual = opcoes[0];
        const button = document.createElement("button");
        button.textContent = opcaoAtual.texto;
        button.addEventListener("click", () => escolherOpcao(opcaoAtual.proximaPagina));
        ElementoOpcoes.appendChild(button);

        // chamada recursiva para criar botões para as opções restantes
        criarOpcoes(opcoes.slice(1));
    }

    if (paginaAtualObj.opcoes.length > 0) {
        criarOpcoes(paginaAtualObj.opcoes); // Cria botões para todas as opções
    }
}

function escolherOpcao(proximaPagina) { 
    if (historia[proximaPagina]) {
    
         mostrarPagina(proximaPagina)
         
    // reproduz o efeito sonoro ao clicar em uma opção
    const efeitoSonoro = document.getElementById("efeitoSonoro");
    efeitoSonoro.play()
    } else {
        // para lidar com o fim do jogo ou páginas inexistentes
        alert("Fim do jogo!")
    }
}

// para mostrar a página inicial ao carregar o jogo
mostrarPagina("pagina0_0")
</script>
</body>
